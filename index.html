<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>E-Learning RPL | SMK Al-Hikmah</title>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link rel="stylesheet" href="css/style.css">
<script type="module" src="js/firebase.js"></script>
<script type="module" src="js/login-siswa.js"></script>
<script type="module" src="js/auth-guard.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

</head>
<body>
  <!-- Preloader -->
<div id="preloader">
  <div class="spinner"></div>
</div>
<nav>
 <div class="brand">
  <img src="logo.png"> SMK AL-HIKMAH TAROGONG KALER GARUT
 </div>
 <div class="nav-action">
  <button id="btn-daftar-siswa" class="nav-btn">
    <i class="fa-solid fa-user-plus"></i>
    <span>Daftar Siswa</span>
  </button>
</div>
</nav>

<section class="hero">
 <div class="hero-bg">
  <img src="asesmen.png" class="active" loading="eager" fetchpriority="high">
<img src="guru smk.png" loading="lazy">
<img src="siswa.png" loading="lazy">
<img src="guru.png" loading="lazy">
 </div>
 <div class="slider-dots" id="sliderDots"></div>

 <div class="hero-inner">
  <div class="hero-text">
   <h1>Selamat Datang di E-Learning Jurusan RPL</h1>
   <p>Media pembelajaran digital untuk siswa Rekayasa Perangkat Lunak
   SMK Al-Hikmah Tarogong Kaler Garut.</p>
  </div>

  <div class="hero-login">
  <h3>Login E-Learning</h3>

  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">

  <button id="btnLogin">Masuk</button>

  <div class="divider">atau</div>

  <button class="btn-google" id="btnGoogle">
    <img src="https://www.svgrepo.com/show/475656/google-color.svg" width="20">
    Login dengan Google
  </button>
</div>
  </div>
</section>

<section class="about">
 <div class="container about-grid">
  <div class="about-text">
   <span>TENTANG PLATFORM</span>
   <h2>E-Learning Jurusan RPL SMK Al-Hikmah</h2>
   <p>E-Learning ini adalah platform pembelajaran digital khusus untuk siswa jurusan Rekayasa Perangkat Lunak (RPL) di SMK Al-Hikmah Tarogong Kaler, Garut.</p>
   <p>Platform ini dirancang untuk memudahkan siswa mengakses materi pelajaran, latihan praktik, tugas, dan evaluasi secara terpusat dan terstruktur.</p>
   <p>Dengan fitur interaktif dan monitoring, guru dapat memantau progres belajar siswa, sementara siswa bisa belajar lebih fleksibel dan efektif sesuai kurikulum RPL.</p>
  </div>

  <div class="about-cards">
  <div class="about-card">üìò Materi Terstruktur</div>
  <div class="about-card">üíª Fokus Praktik & Proyek</div>
  <div class="about-card">üìä Monitoring Pembelajaran</div>
  <div class="about-card">üìù Evaluasi & Tugas</div> <!-- opsional -->
</div>
 </div>
</section>

<section>
 <div class="container">
  <div class="section-head">
   <span>Informasi</span>
   <h2>Pengumuman Terbaru</h2>
   <p>Update resmi terkait kegiatan akademik dan pembelajaran RPL</p>
  </div>

  <div class="announce-list">
   <div class="announce">
    <i class="fa-solid fa-bullhorn"></i>
    <div>
     <h3>Ujian Tengah Semester</h3>
     <p>UTS Semester Ganjil dimulai tanggal 10 Oktober 2025.</p>
    </div>
   </div>

   <div class="announce">
    <i class="fa-solid fa-clock"></i>
    <div>
     <h3>Batas Pengumpulan Tugas</h3>
     <p>Tugas Pemrograman Web dikumpulkan maksimal 8 Oktober 2025.</p>
    </div>
   </div>

   <div class="announce">
    <i class="fa-solid fa-calendar-check"></i>
    <div>
     <h3>Jadwal Praktik</h3>
     <p>Jadwal praktik RPL terbaru sudah tersedia di platform.</p>
    </div>
   </div>
  </div>
 </div>
</section>

<section>
 <div class="container video-split">
  <div>
   <span style="letter-spacing:.14em;font-size:13px;font-weight:600;color:var(--primary-dark)">
    PROFIL JURUSAN
   </span>
   <h2 style="font-size:42px;font-weight:800;margin:14px 0">
    Rekayasa Perangkat Lunak
   </h2>
   <p style="line-height:1.9;color:#374151">
    Jurusan RPL memfokuskan pembelajaran pada pengembangan software,
    web application, database, dan pemrograman modern berbasis industri.
   </p>
  </div>

  <div class="video-box">
   <iframe src="video.mp4" allowfullscreen></iframe>
  </div>
 </div>
</section>

<section style="background:#f0fdf4">
 <div class="container">
  <div class="section-head">
   <span>Kelas</span>
   <h2>Pilih Tingkatan</h2>
   <p>Akses materi sesuai jenjang pembelajaran</p>
  </div>

  <div class="class-grid">
   <div class="class-item class-btn" data-class="X">
    <h3>Kelas X</h3>
   </div>

   <div class="class-item class-btn" data-class="XI">
    <h3>Kelas XI</h3>
   </div>

   <div class="class-item class-btn" data-class="XII">
    <h3>Kelas XII</h3>
   </div>
  </div>
 </div>
</section>

<!-- ===== SEMESTER ===== -->
<section id="section-semester" style="display:none;background:#f0fdf4">
  <div class="container">
    <div class="section-head">
      <span>Semester</span>
      <h2>Pilih Semester</h2>
    </div>

    <div class="class-grid">
      <div class="class-item semester-btn" data-semester="1"><h3>Semester 1</h3></div>
      <div class="class-item semester-btn" data-semester="2"><h3>Semester 2</h3></div>
    </div>
  </div>
</section>

<!-- ===== MAPEL ===== -->
<section id="section-mapel" style="display:none">
  <div class="container">
    <div class="section-head">
      <span>Mata Pelajaran</span>
      <h2>Pilih Mapel</h2>
    </div>

    <div class="class-grid" id="mapel-grid"></div>
  </div>
</section>

<!-- ===== PERTEMUAN ===== -->
<section id="section-pertemuan" style="display:none;background:#f0fdf4">
  <div class="container">
    <div class="section-head">
      <span>Pertemuan</span>
      <h2>Daftar Pertemuan</h2>
    </div>

    <div class="class-grid" id="pertemuan-grid"></div>
  </div>
</section>

<section class="flow-section">
  <div class="container">
    <div class="section-head">
      <span>Flow Pembelajaran</span>
      <h2>Alur Penggunaan E-Learning RPL</h2>
      <p>Ikuti langkah-langkah berikut untuk mengakses materi pembelajaran secara lengkap</p>
    </div>

    <div class="flow-timeline">

      <div class="flow-item reveal">
        <div class="flow-icon"><i class="fa-solid fa-right-to-bracket"></i></div>
        <div class="flow-content">
          <h4>Login Akun</h4>
          <p>Siswa login menggunakan akun yang telah terdaftar untuk membuka akses pembelajaran.</p>
        </div>
        <span class="flow-number">01</span>
      </div>

      <div class="flow-item reveal">
        <div class="flow-icon"><i class="fa-solid fa-layer-group"></i></div>
        <div class="flow-content">
          <h4>Pilih Kelas</h4>
          <p>Pilih tingkat kelas sesuai jenjang pendidikan (X, XI, atau XII).</p>
        </div>
        <span class="flow-number">02</span>
      </div>

      <div class="flow-item reveal">
        <div class="flow-icon"><i class="fa-solid fa-calendar-days"></i></div>
        <div class="flow-content">
          <h4>Pilih Semester</h4>
          <p>Tentukan semester aktif untuk menampilkan mata pelajaran yang tersedia.</p>
        </div>
        <span class="flow-number">03</span>
      </div>

      <div class="flow-item reveal">
        <div class="flow-icon"><i class="fa-solid fa-book-open"></i></div>
        <div class="flow-content">
          <h4>Pilih Mata Pelajaran</h4>
          <p>Akses mata pelajaran sesuai kurikulum dan konsentrasi keahlian RPL.</p>
        </div>
        <span class="flow-number">04</span>
      </div>

      <div class="flow-item reveal">
        <div class="flow-icon"><i class="fa-solid fa-list-check"></i></div>
        <div class="flow-content">
          <h4>Pilih Pertemuan</h4>
          <p>Pilih pertemuan yang tersedia sesuai jadwal pembelajaran.</p>
        </div>
        <span class="flow-number">05</span>
      </div>

      <div class="flow-item reveal highlight">
        <div class="flow-icon"><i class="fa-solid fa-user-check"></i></div>
        <div class="flow-content">
          <h4>Absensi Kelas</h4>
          <p>Lakukan absensi sebagai bukti kehadiran sebelum mengakses materi.</p>
        </div>
        <span class="flow-number">06</span>
      </div>

      <div class="flow-item reveal success">
        <div class="flow-icon"><i class="fa-solid fa-code"></i></div>
        <div class="flow-content">
          <h4>Akses Materi & Praktik</h4>
          <p>Pelajari materi, lakukan praktik, dan kerjakan tugas pembelajaran.</p>
        </div>
        <span class="flow-number">07</span>
      </div>

    </div>
  </div>
</section>

<section>
  <div class="container map-glass">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3952.9506571721165!2d107.89231381531737!3d-7.233750174483872!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e68b0b01cd0da59%3A0xfad23ef07dfa98d4!2sSMK%20Al-hikmah%20Tarogong%20Kaler!5e0!3m2!1sen!2sid!4v0000000000000"
      width="100%"
      height="480"
      style="border:0; border-radius:28px;"
      allowfullscreen
      loading="lazy"
    ></iframe>
  </div>
</section>

<section class="numbers">
  <div class="numbers-grid">
    <div class="numbers-title">
      SOME<br>NUMBERS
    </div>

    <div class="stats">
      <div class="stat">
        <i class="fa-solid fa-user"></i>
        <h3 class="count" data-target="682">0</h3>
        <span>Users</span>
      </div>
      <div class="stat">
        <i class="fa-solid fa-graduation-cap"></i>
        <h3 class="count" data-target="30">0</h3>
        <span>Courses</span>
      </div>
      <div class="stat">
        <i class="fa-solid fa-puzzle-piece"></i>
        <h3 class="count" data-target="3218">0</h3>
        <span>Activities</span>
      </div>
    </div>
  </div>
</section>

<section class="contact-section">
  <div class="container contact-container">
    <h2>Hubungi Kami</h2>
    <div class="contact-content">
      <!-- Kolom kiri: Nama & Deskripsi Sekolah -->
      <div class="contact-intro">
        <h3>SMK AL HIKMAH TARKAL</h3>
        <p>Sekolah yang dinaungi oleh Yayasan Pendidikan Al-Hikmah.</p>
      </div>

      <!-- Kolom kanan: Detail Kontak -->
      <div class="contact-info">
        <div class="info-item">
          <i class="fa-solid fa-location-dot"></i>
          <p>Jalan Prof. H. Aam Hamdani No. 42.a, Tarogong Kaler, 44151, Kabupaten Garut</p>
        </div>

        <div class="info-item">
          <i class="fa-solid fa-phone"></i>
          <p>0262-5000000</p>
        </div>

        <div class="info-item">
          <i class="fa-solid fa-envelope"></i>
          <p>sekolahalhikmah@ymail.com</p>
        </div>
      </div>
    </div>
  </div>
</section>

<div id="overlay-daftar" style="
  position:fixed;inset:0;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(6px);
  display:none;
  z-index:999;
"></div>

<!-- Login Popup -->
<div id="popup-login" style="
  position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
  width:340px;padding:28px 20px;background:rgba(255,255,255,.9);
  backdrop-filter:blur(20px);border-radius:24px;box-shadow:0 40px 120px rgba(0,0,0,.35);
  display:none;flex-direction:column;gap:14px;z-index:1000;
">
  <h3 style="text-align:center;margin:0;font-weight:700">Login Akun</h3>
  <input placeholder="Email / NIS" style="width:100%;padding:12px;border-radius:16px;border:1px solid #e5e7eb">
  <input type="password" placeholder="Password" style="width:100%;padding:12px;border-radius:16px;border:1px solid #e5e7eb">
  <button style="width:100%;padding:14px;border-radius:22px;border:0;font-weight:700;background:linear-gradient(135deg,#6BCF9B,#34d399);cursor:pointer">Login</button>
</div>

<!-- Daftar Popup -->
<div id="popup-daftar" style="
  position:fixed;top:0;right:-420px;
  width:420px;height:100%;
  padding:36px 28px;
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(20px);
  border-radius:0 0 0 28px;
  display:flex;
  flex-direction:column;
  gap:12px;
  color:#0f2f1f;
  z-index:1000;
  box-shadow:0 40px 120px rgba(0,0,0,.35);
  transition: right 0.5s ease;
  overflow-y:auto;
">
  <h3 style="text-align:center;font-weight:800;margin-bottom:20px">Daftar Siswa Baru</h3>
  <input placeholder="Nama Lengkap" style="width:100%;padding:14px;border-radius:18px;border:1px solid #e5e7eb">
  <input placeholder="Email / NIS" style="width:100%;padding:14px;border-radius:18px;border:1px solid #e5e7eb">
  <input placeholder="Nomor Telepon" style="width:100%;padding:14px;border-radius:18px;border:1px solid #e5e7eb">
  <select style="width:100%;padding:14px;border-radius:18px;border:1px solid #e5e7eb;color:#0f2f1f">
    <option value="">Pilih Kelas</option>
    <option value="X">Kelas X</option>
    <option value="XI">Kelas XI</option>
    <option value="XII">Kelas XII</option>
  </select>
  <button id="submit-daftar">Daftar</button>
</button>
</div>

<!-- ===== LOADING OVERLAY ABSENSI ===== -->
<div id="loadingAbsensi">
  <div class="loader-card">
    <div class="spinner"></div>
    <p>Mengalihkan ke halaman absensi‚Ä¶</p>
  </div>
</div>

<footer>
 ¬© 2025 Mahasiswa PTI IPI Garut | SMK Al-Hikmah Tarogong Kaler Garut
</footer>

<script>
// ================= PRELOADER & PAGE ENTER =================
window.addEventListener('load', () => {
  const preloader = document.getElementById('preloader');

  if (!localStorage.getItem('preloaderShown')) {
    preloader.classList.remove('hidden');
   requestAnimationFrame(() => {
  preloader.classList.add('hidden');
});
  } else {
    preloader.style.display = 'none';
  }

  document.body.classList.add('page-enter');

  // Reset login lama saat reload
  localStorage.removeItem("login");
  localStorage.removeItem("nama");

  if (sessionStorage.getItem("wasLoggedIn")) {
    Swal.fire({
      icon: 'info',
      title: 'Harap login kembali',
      text: 'Untuk mengakses pembelajaran',
      timer: 2000,
      showConfirmButton: false
    });
    document.querySelector('.hero-login').scrollIntoView({behavior:"smooth", block:"start"});
    sessionStorage.removeItem("wasLoggedIn");
  } else {
    // jika reload normal scroll ke hero
    document.querySelector('.hero').scrollIntoView({behavior:"smooth", block:"start"});
  }
});

// ================= SCROLL REVEAL =================
const scrollElements = document.querySelectorAll('[data-animate], .reveal');
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if(entry.isIntersecting) entry.target.classList.add('active');
  });
}, { threshold: 0.1 });
scrollElements.forEach(el => observer.observe(el));

// ================= HERO SLIDER =================
const slides = document.querySelectorAll('.hero-bg img');
const dotsWrap = document.getElementById('sliderDots');
let slideIndex = 0;

slides.forEach((_, i) => {
  const dot = document.createElement('span');
  if (i === 0) dot.classList.add('active');
  dot.onclick = () => showSlide(i);
  dotsWrap.appendChild(dot);
});

function showSlide(i) {
  slides.forEach(s => s.classList.remove('active'));
  const dots = document.querySelectorAll('.slider-dots span');
  dots.forEach(d => d.classList.remove('active'));
  slides[i].classList.add('active');
  dots[i].classList.add('active');
  slideIndex = i;
}
setInterval(() => showSlide((slideIndex + 1) % slides.length), 6000);

// ================= COUNT UP =================
document.querySelectorAll('.count').forEach(counter => {
  const update = () => {
    const target = +counter.dataset.target;
    const current = +counter.innerText;
    const inc = Math.ceil(target / 60);
    if (current < target) {
      counter.innerText = current + inc;
      requestAnimationFrame(update);
    } else {
      counter.innerText = target;
    }
  };
  update();
});

// ================= FLOW KELAS ‚Üí SEMESTER ‚Üí MAPEL ‚Üí PERTEMUAN =================
const sectionSemester   = document.getElementById('section-semester');
const sectionMapel      = document.getElementById('section-mapel');
const sectionPertemuan  = document.getElementById('section-pertemuan');
const mapelGrid         = document.getElementById('mapel-grid');
const pertemuanGrid     = document.getElementById('pertemuan-grid');
let selectedClass = null;

// ================= Kelas =================
document.querySelectorAll('.class-btn').forEach(btn => {
  btn.onclick = () => {
    const kelas = btn.dataset.class;
    if(kelas !== "XI"){
      Swal.fire({icon:'info', title:'Coming Soon'});
      return;
    }
    selectedClass = kelas;
    showSemester();
  };
});

function showSemester(){
  sectionSemester.style.display = "block";
  sectionSemester.scrollIntoView({behavior:"smooth", block:"center"});
}

// ================= Semester =================
document.querySelectorAll('.semester-btn').forEach(btn => {
  btn.onclick = () => {
    const semester = btn.dataset.semester;
    if(semester !== "1"){
      Swal.fire({icon:'info', title:'Coming Soon'});
      return;
    }
    showMapel(selectedClass, semester);
  };
});

// ================= Mapel =================
const kelasData = {
  XI: {
    1: [
      {name:"Konsentrasi keahlian 2 (Web)", open:true},
      {name:"Mapel pilihan (framework)", open:false},
      {name:"Matematika", open:false},
      {name:"Pendidikan Pancasila dan kewarganegaraan", open:false},
      {name:"Bahasa Indonesia", open:false},
      {name:"Projek kreatif dan kewirausahaan", open:false},
      {name:"Pjok", open:false},
      {name:"Sejarah", open:false},
      {name:"Pendidikan agama Islam dan Budi pekerti", open:false},
      {name:"Bahasa inggris", open:false},
      {name:"BK", open:false},
      {name:"Konsentrasi keahlian 1 (PBO)", open:false},
      {name:"Konsentrasi keahlian 4 (Android)", open:false},
      {name:"Konsentrasi keahlian 3 (Basis data)", open:false}
    ]
  }
};

function showMapel(kelas, semester){
  sectionMapel.style.display = "block";
  sectionMapel.scrollIntoView({behavior:"smooth", block:"center"});
  mapelGrid.innerHTML = '';
  kelasData[kelas][semester].forEach(mp => {
    const div = document.createElement('div');
    div.classList.add('class-item');
    div.textContent = mp.open ? mp.name : `üîí ${mp.name}`;
    div.style.cursor = mp.open ? "pointer" : "not-allowed";
    div.style.opacity = mp.open ? "1" : ".5";
    div.onmouseenter = () => { if(mp.open) div.style.background="#f5f5f5"; }
    div.onmouseleave = () => { if(mp.open) div.style.background=""; }

    if(!mp.open){
      div.onclick = () => Swal.fire({icon:'info', title:'Coming Soon'});
    } else {
      div.onclick = () => showPertemuan(mp.name);
    }
    mapelGrid.appendChild(div);
  });
}

// ================= Pertemuan =================
const pertemuanData = {
  "Konsentrasi keahlian 2 (Web)":[...Array(16)].map((_,i)=>({name:`Pertemuan ${i+1}`, open:i===0}))
};

function showPertemuan(mapel){
  sectionPertemuan.style.display = "block";
  sectionPertemuan.scrollIntoView({behavior:"smooth", block:"center"});
  pertemuanGrid.innerHTML = '';
  pertemuanData[mapel].forEach(p => {
    const div = document.createElement('div');
    div.classList.add('class-item');
    div.textContent = p.open ? p.name : `üîí ${p.name}`;
    div.style.cursor = p.open ? "pointer" : "not-allowed";
    div.style.opacity = p.open ? "1" : ".5";
    div.onmouseenter = () => { if(p.open) div.style.background="#f5f5f5"; }
    div.onmouseleave = () => { if(p.open) div.style.background=""; }

    if(!p.open){
      div.onclick = () => Swal.fire({icon:'info', title:'Coming Soon'});
    } else {
      div.onclick = () => loadingKeAbsensi();
    }
    pertemuanGrid.appendChild(div);
  });
}

// ================= POPUP DAFTAR SISWA =================
const btnDaftarPopup = document.getElementById('btn-daftar-siswa');
const popupDaftar = document.getElementById('popup-daftar');
const overlayDaftar = document.getElementById('overlay-daftar');
const btnSubmitForm = document.getElementById('submit-daftar');

btnDaftarPopup.onclick = () => {
  popupDaftar.style.right = '0';
  overlayDaftar.style.display = 'block';
};

overlayDaftar.onclick = () => {
  popupDaftar.style.right = '-420px';
  overlayDaftar.style.display = 'none';
};
popupDaftar.querySelector('.close')?.addEventListener('click', () => {
  popupDaftar.style.right = '-420px';
  overlayDaftar.style.display = 'none';
});

btnSubmitForm.onclick = (e) => {
  e.preventDefault();
  }

  Swal.fire({icon:'success', title:'Pendaftaran berhasil!', showConfirmButton:true})
    .then(() => {
      popupDaftar.style.right = '-420px';
      overlayDaftar.style.display = 'none';
    });
};

function loadingKeAbsensi(){
  const loading = document.getElementById("loadingAbsensi");
  loading.classList.add("active");

  setTimeout(()=>{
    window.location.href = "absensi.html";
  },2000);
}

/* Flow step stagger animation */
const flowItems = document.querySelectorAll('.flow-item');

const flowObserver = new IntersectionObserver(entries=>{
  entries.forEach((entry,i)=>{
    if(entry.isIntersecting){
      setTimeout(()=>{
        entry.target.classList.add('active');
      }, i*120);
    }
  });
},{threshold:.2});

flowItems.forEach(item=>flowObserver.observe(item));
  import { requireLogin } from "./auth-guard.js";

btn.onclick = () => {
  requireLogin(() => {
    showSemester();
  });
};

</script>
</body>
</html>
