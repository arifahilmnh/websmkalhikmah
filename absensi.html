<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Absensi | E-Learning RPL</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
:root{
 --primary:#34d399;
 --secondary:#10b981;
 --dark:#064e3b;
 --glass:rgba(255,255,255,.75);
 --shadow-light: rgba(0,0,0,.08);
 --shadow-medium: rgba(0,0,0,.15);
 --shadow-heavy: rgba(0,0,0,.25);
 --transition-fast: .15s ease;
 --transition-normal: .25s ease;
 --transition-slow: .4s ease;
}

*{box-sizing:border-box}

body{
 margin:0;
 font-family:'Poppins',sans-serif;
 background:
  radial-gradient(circle at top left,#bbf7d0,transparent 40%),
  radial-gradient(circle at bottom right,#99f6e4,transparent 40%),
  linear-gradient(180deg,#ecfdf5,#f8fdfb);
 color:var(--dark);
 min-height:100vh;
 overflow-x:hidden; /* Mencegah scroll horizontal */
}

/* ================= NAVBAR ================= */
nav{
 position:fixed;
 top:0;left:0;width:100%;
 z-index:99;
 background:rgba(255,255,255,.9);
 backdrop-filter:blur(18px);
 padding:10px 24px;
 display:flex;
 justify-content:space-between;
 align-items:center;
 box-shadow:0 8px 24px var(--shadow-light);
 transition:var(--transition-normal);
}

.brand{
 display:flex;
 align-items:center;
 gap:12px;
 font-weight:800;
 font-size:16px;
 transition:var(--transition-fast);
}

.brand img{
 width:36px;
 border-radius:50%;
 transition:var(--transition-fast);
}

.brand:hover img{
 transform:scale(1.05);
}

.nav-user{
 display:flex;
 align-items:center;
 gap:10px;
 font-size:13px;
 font-weight:600;
}

#absenStatus{
 font-size:11px;
 padding:5px 12px;
 border-radius:30px;
 transition:var(--transition-fast);
 animation:pulse 2s infinite; /* Animasi pulse untuk status */
}

.status-belum{background:#fef3c7;color:#92400e}
.status-sudah{background:#dcfce7;color:#166534}

@keyframes pulse{
 0%, 100% { opacity: 1; }
 50% { opacity: 0.7; }
}

/* ================= CONTENT ================= */
section{
 padding:160px 20px 80px;
 display:flex;
 justify-content:center;
}

.container{
 width:100%;
 max-width:820px;
 background:var(--glass);
 backdrop-filter:blur(22px);
 border-radius:36px;
 padding:56px 48px;
 box-shadow:
  0 30px 80px var(--shadow-medium),
  inset 0 0 0 1px rgba(255,255,255,.6);
 animation:cardIn .9s cubic-bezier(.2,.8,.2,1);
 position:relative;
 overflow:hidden;
}

.container::before{
 content:'';
 position:absolute;
 top:0;left:0;width:100%;height:100%;
 background:linear-gradient(45deg, rgba(255,255,255,.1), transparent);
 pointer-events:none;
}

@keyframes cardIn{
 from{
  opacity:0;
  transform:translateY(60px) scale(.95);
 }
 to{
  opacity:1;
  transform:none;
 }
}

h2{
 text-align:center;
 font-size:34px;
 font-weight:800;
 margin-bottom:10px;
 animation:fadeInUp 1s .3s both;
}

.desc{
 text-align:center;
 font-size:14px;
 color:#64748b;
 margin-bottom:48px;
 animation:fadeInUp 1s .5s both;
}

@keyframes fadeInUp{
 from{
  opacity:0;
  transform:translateY(20px);
 }
 to{
  opacity:1;
  transform:none;
 }
}

/* ================= FORM ================= */
.form-grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:28px;
}

.form-group{
 display:flex;
 flex-direction:column;
 animation:slideIn 0.8s ease both;
}

.form-group:nth-child(1){animation-delay:0.7s;}
.form-group:nth-child(2){animation-delay:0.8s;}
.form-group:nth-child(3){animation-delay:0.9s;}
.form-group:nth-child(4){animation-delay:1.0s;}
.form-group:nth-child(5){animation-delay:1.1s;}

@keyframes slideIn{
 from{
  opacity:0;
  transform:translateX(-30px);
 }
 to{
  opacity:1;
  transform:none;
 }
}

.form-group.full{grid-column:1/3}

label{
 font-weight:600;
 font-size:13px;
 display:flex;
 align-items:center;
 gap:8px;
 margin-bottom:8px;
 color:#065f46;
 transition:var(--transition-fast);
}

label i{
 color:var(--secondary);
 transition:var(--transition-fast);
}

label:hover i{
 transform:scale(1.1);
}

input,select{
 padding:16px 18px;
 border-radius:18px;
 border:1px solid rgba(0,0,0,.08);
 background:rgba(255,255,255,.85);
 font-size:14px;
 transition:var(--transition-normal);
 position:relative;
}

input:focus,select:focus{
 outline:none;
 border-color:var(--primary);
 box-shadow:0 0 0 4px rgba(52,211,153,.25), 0 4px 12px var(--shadow-light);
 transform:translateY(-2px);
}

input[readonly]{
 background:#f1f5f9;
 color:#64748b;
}

/* ================= BUTTON ================= */
.submit-btn{
 margin-top:40px;
 width:100%;
 padding:20px;
 border-radius:999px;
 border:0;
 font-size:16px;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 background:linear-gradient(135deg,#6ee7b7,#34d399);
 box-shadow:0 18px 40px rgba(16,185,129,.35);
 transition:var(--transition-slow);
 position:relative;
 overflow:hidden;
}

.submit-btn::before{
 content:'';
 position:absolute;
 top:50%;left:50%;
 width:0;height:0;
 background:rgba(255,255,255,.3);
 border-radius:50%;
 transform:translate(-50%,-50%);
 transition:width .6s, height .6s;
}

.submit-btn:hover::before{
 width:300px;
 height:300px;
}

.submit-btn:hover{
 transform:translateY(-3px);
 box-shadow:0 28px 60px rgba(16,185,129,.45);
}

.submit-btn:active{
 transform:translateY(-1px);
}

/* ================= FOOTER ================= */
footer{
 background:#064e3b;
 color:#ecfeff;
 text-align:center;
 padding:22px;
 font-size:13px;
}

/* ================= RESPONSIVE ================= */
/* Tablet (481px - 768px) */
@media (max-width: 768px) {
 .container {
  padding: 48px 36px;
  border-radius: 28px;
 }
 h2 {
  font-size: 28px;
 }
 .desc {
  font-size: 13px;
  margin-bottom: 36px;
 }
 .form-grid {
  gap: 24px;
 }
 input, select {
  padding: 14px 16px;
  font-size: 13px;
 }
 .submit-btn {
  margin-top: 32px;
  padding: 18px;
  font-size: 15px;
 }
 nav {
  padding: 8px 20px;
 }
 .brand {
  font-size: 14px;
 }
 .brand img {
  width: 32px;
 }
 .nav-user {
  font-size: 12px;
  gap: 8px;
 }
 #absenStatus {
  font-size: 10px;
  padding: 4px 10px;
 }
}

/* Mobile (max-width: 480px) */
@media (max-width: 480px) {
 .container {
  padding: 40px 28px;
  border-radius: 24px;
 }
 .form-grid {
  grid-template-columns: 1fr;
  gap: 20px;
 }
 .form-group.full {
  grid-column: auto;
 }
 h2 {
  font-size: 24px;
 }
 .desc {
  font-size: 12px;
  margin-bottom: 32px;
 }
 label {
  font-size: 12px;
 }
 input, select {
  padding: 12px 14px;
  font-size: 12px;
 }
 .submit-btn {
  margin-top: 28px;
  padding: 16px;
  font-size: 14px;
 }
 nav {
  padding: 6px 16px;
 }
 .brand {
  font-size: 12px;
  gap: 8px;
 }
 .brand img {
  width: 28px;
 }
 .nav-user {
  font-size: 11px;
  gap: 6px;
 }
 #absenStatus {
  font-size: 9px;
  padding: 3px 8px;
 }
 footer {
  padding: 18px;
  font-size: 12px;
 }
}

/* ===== LOADING SCREEN ===== */
#loadingScreen{
 position:fixed;
 inset:0;
 background:rgba(255,255,255,.65);
 backdrop-filter:blur(18px);
 display:flex;
 align-items:center;
 justify-content:center;
 z-index:9999;
 opacity:0;
 pointer-events:none;
 transition:var(--transition-fast);
}

#loadingScreen.active{
 opacity:1;
 pointer-events:auto;
}

.loader-card{
 background:rgba(255,255,255,.85);
 padding:36px 44px;
 border-radius:28px;
 text-align:center;
 box-shadow:0 30px 80px var(--shadow-medium);
 animation:pop .3s ease;
}

@keyframes pop{
 from{transform:scale(.85);opacity:0}
 to{transform:scale(1);opacity:1}
}

.spinner{
 width:52px;
 height:52px;
 border-radius:50%;
 border:5px solid #d1fae5;
 border-top-color:#10b981;
 animation:spin 0.5s linear infinite;
 margin:0 auto 18px;
}

@keyframes spin{
 to{transform:rotate(360deg)}
}

#loadingText{
 font-weight:600;
 font-size:14px;
 color:#065f46;
}

</style>
</head>
<body>
<div id="loadingScreen">
  <div class="loader-card">
    <div class="spinner"></div>
    <p id="loadingText">Mengalihkan...</p>
  </div>
</div>
 
<!-- NAVBAR (TETAP) -->
<nav>
 <div class="brand">
  <img src="logo.png">
  SMK AL-HIKMAH GARUT TAROGONG KALER
 </div>
 <div class="nav-user">
  <i class="fa-solid fa-user"></i>
  <span id="navNama">Siswa01</span>
  <span id="absenStatus" class="status-belum">⏳ Belum Absen</span>
 </div>
</nav>

<section>
 <div class="container">
  <h2>Absensi Siswa</h2>
  <p class="desc">Isi absensi terlebih dahulu sebelum mengikuti pembelajaran</p>

  <form id="form-absensi">
   <div class="form-grid">

    <div class="form-group">
     <label><i class="fa-solid fa-user"></i> Nama</label>
     <input id="nama" readonly>
    </div>

    <div class="form-group">
     <label><i class="fa-solid fa-id-card"></i> NIS</label>
     <input id="nis" readonly>
    </div>

    <div class="form-group">
     <label><i class="fa-solid fa-school"></i> Kelas</label>
     <select id="kelas">
      <option value="">Pilih</option>
      <option>X</option>
      <option>XI</option>
      <option>XII</option>
     </select>
    </div>

    <div class="form-group">
     <label><i class="fa-solid fa-calendar"></i> Tanggal</label>
     <input type="date" id="tanggal">
    </div>

    <div class="form-group full">
     <label><i class="fa-solid fa-clipboard-check"></i> Status Kehadiran</label>
     <select id="status">
      <option value="">Pilih</option>
      <option value="Hadir">Hadir</option>
      <option value="Sakit">Sakit</option>
      <option value="Izin">Izin</option>
     </select>
    </div>

   </div>

   <button class="submit-btn">Kirim Absensi</button>
  </form>
 </div>
</section>

<footer>
 © 2025 Mahasiswa PTI IPI Garut | SMK Al-Hikmah Tarogong Kaler Garut
</footer>
<script>
// ================== KONFIG ==================
const REDIRECT_TIME = "pertemuan1.html";
const REDIRECT_HOME = "index.html";

// ================== ELEMENT ==================
const nama = document.getElementById("nama");
const nis = document.getElementById("nis");
const kelas = document.getElementById("kelas");
const tanggal = document.getElementById("tanggal");
const status = document.getElementById("status");
const badge = document.getElementById("absenStatus");
const navNama = document.getElementById("navNama");
const form = document.getElementById("form-absensi");

const loading = document.getElementById("loadingScreen");
const loadingText = document.getElementById("loadingText");
const submitBtn = form.querySelector("button");

// ================== DATA STATIS SISWA ==================
// (sengaja dibuat statis, bukan dari login)
const DATA_SISWA = {
  nama: "Siswa01",
  nis: "1234567890"
};

// ================== SET DATA AWAL ==================
nama.value = DATA_SISWA.nama;
nis.value = DATA_SISWA.nis;
navNama.textContent = DATA_SISWA.nama;

tanggal.valueAsDate = new Date();
badge.textContent = "⏳ Belum Absen";
badge.className = "status-belum";

// ================== SUBMIT ABSENSI ==================
form.addEventListener("submit", function (e) {
  e.preventDefault();

  // Validasi form
  if (!kelas.value || !tanggal.value || !status.value) {
    Swal.fire("Lengkapi Data", "Semua field wajib diisi", "warning");
    return;
  }

  // Kunci tombol biar tidak double klik
  submitBtn.disabled = true;

  badge.textContent = "✅ Sudah Absen";
  badge.className = "status-sudah";

  // ================== JIKA HADIR ==================
  if (status.value === "Hadir") {
    Swal.fire({
      icon: "success",
      title: "Absensi Tersimpan",
      text: "Mengalihkan ke pembelajaran...",
      timer: 1500,
      showConfirmButton: false
    });

    loadingText.textContent = "Mengalihkan ke pembelajaran...";
    loading.classList.add("active");

    setTimeout(() => {
      window.location.replace(REDIRECT_TIME);
    }, 1600);

    return;
  }

  // ================== JIKA SAKIT / IZIN ==================
  Swal.fire({
    icon: "question",
    title: "Konfirmasi",
    text: "Apakah Anda ingin mengikuti pembelajaran?",
    showCancelButton: true,
    confirmButtonText: "Ya",
    cancelButtonText: "Tidak",
    confirmButtonColor: "#10b981"
  }).then((result) => {

    // ====== JIKA YA ======
    if (result.isConfirmed) {
      Swal.fire({
        icon: "success",
        title: "Permintaan Dicatat",
        text: "Anda diizinkan mengikuti pembelajaran",
        timer: 1500,
        showConfirmButton: false
      });

      loadingText.textContent = "Mengalihkan ke pembelajaran...";
      loading.classList.add("active");

      setTimeout(() => {
        window.location.replace(REDIRECT_TIME);
      }, 1600);
    }

    // ====== JIKA TIDAK ======
    else {
      Swal.fire({
        icon: "info",
        title: "Baik",
        text: "Anda diarahkan ke beranda",
        timer: 1200,
        showConfirmButton: false
      });

      loadingText.textContent = "Mengalihkan ke beranda...";
      loading.classList.add("active");

      setTimeout(() => {
        window.location.replace(REDIRECT_HOME);
      }, 1300);
    }
  });
});
</script>
</body>
</html>
